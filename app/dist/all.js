console.log("Load script.js");var app={};const VueApp=Vue.createApp({data:function(){return{test:"heeeee",dataObj:{},comments:[],currentUser:{},sendAction:!0,deletWarning:!1,idCounter:4}},mounted:function(){this.fetcher()},methods:{fetcher(){if(null===localStorage.getItem("dataJson"))fetch("./app/js/data/data.json").then((e=>e.json())).then((e=>{this.dataObj=e,this.comments=e.comments,this.currentUser=e.currentUser,this.updateLocal(e)})).catch((e=>console.log(e.message)));else{console.log("getting data from local storage ...");let e=JSON.parse(localStorage.getItem("dataJson"));this.dataObj=e,this.comments=e.comments,this.currentUser=e.currentUser}},updateLocal(e){localStorage.setItem("dataJson",JSON.stringify(e))},delAlert(e){this.deletWarning=!0},scoreUpdater(e,t){let n=JSON.parse(localStorage.getItem("dataJson"));this.alter(n,"id",e,"score",t)},textUpdater(e,t){let n=JSON.parse(localStorage.getItem("dataJson"));this.alter(n,"id",e,"content",t)},addThread(e){let t=JSON.parse(localStorage.getItem("dataJson")),n={id:++this.idCounter,content:e,score:0,user:this.currentUser,replies:[]};t.comments.push(n),this.updateLocal(t)},alter(e,t,n,s,r){for(index in e)index==t&&e[index]==n&&(e[s]=r),(Array.isArray(e[index])||"object"==typeof e[index])&&this.alter(e[index],t,n,s,r);this.updateLocal(e)}}});app.global={init:function(){console.log("load global functions"),app.global.loadHeader()},loadHeader:function(){console.log("loadHeader()")},fetcher:async function(e){console.log("fetcher entered");const t=await fetch("./app/js/data/data.json");e(await t.json())}},app.global.init(),VueApp.component("alert-blocker",{emits:["alert-cancel"],props:{},template:'\n    <div class="alertBlocker">\n        <div class="deleteAlert">\n            <h1>Delete comment</h1>\n            <p>Are you sure you want to delete this comment? This will remove the comment and can\'t be undone.</p>\n            <button @click="cancel">NO, CANCEL</button>\n            <button>YES, DELETE</button>\n        </div>\n    </div>\n    ',data:function(){return{}},methods:{cancel(){this.$emit("alert-cancel")}},computed:{}}),VueApp.component("comment",{emits:["isReply","del-alert","score","text"],props:{commentData:{type:Object,required:!0},user:{type:Object,required:!0},reply:{type:Boolean,required:!0}},template:'\n    <div class="comment">\n        <div class="votes">\n            <div class="upvote" @click="updateScore(1)"><img src="./images/icon-plus.svg" alt="up vote"></div>\n            <div class="voteNumber">{{score}}</div>\n            <div class="downvote" @click="updateScore(-1)"><img src="./images/icon-minus.svg" alt="down vote"></div>\n        </div>\n        <div class="commentInfo">\n            <img :src="image" alt="image-amyrobson" class="icon">\n            <span class="username">{{commentData.user.username}}</span>\n            <div class="you" v-show="isCurrentUser"><span>you</span></div>\n            <p class="date">{{commentData.createdAt}}</p>\n        </div>\n        <div class="action">\n            <div class="reply" v-show="!isCurrentUser && !reply" @click="replyEmiter">\n                <img src="./images/icon-reply.svg" alt="reply">\n                <span>Reply</span>\n            </div>\n            <div class="reply" v-show="!isCurrentUser && reply" @click="replyEmiter">\n                <img src="./images/icon-reply.svg" alt="reply">\n                <span>Cancel Reply</span>\n            </div>\n            <div class="delete" v-show="isCurrentUser" @click="deletEmiter">\n                <img src="./images/icon-delete.svg" alt="delete">\n                <span>Delete</span>\n            </div>\n            <div class="edit" v-show="isCurrentUser && !editMode" @click="editToggle">\n                <img src="./images/icon-edit.svg" alt="Edit">\n                <span>Edit</span>\n            </div>\n            <div class="edit" v-show="isCurrentUser && editMode" @click="editToggle">\n                <img src="./images/icon-edit.svg" alt="Edit">\n                <span>Discard</span>\n            </div>\n        </div>\n        <div class="content" v-show="!editMode"><p>{{commentData.content}}</p>\n        </div>\n        <textarea name="comment" :id="textId" cols="30" rows="3" placeholder="Add a comment..." v-show="editMode">{{commentData.content}}</textarea>\n        <button v-show="editMode" @click="updateText">UPDATE</button>\n    </div>\n    ',data:function(){return{editMode:!1,isCurrentUser:this.currentUserCheck(),score:this.commentData.score}},methods:{currentUserCheck(){return this.user.username==this.commentData.user.username},editToggle(){this.editMode?this.editMode=!1:this.editMode=!0},replyEmiter(){this.reply?this.$emit("isReply",!1):this.$emit("isReply",!0)},deletEmiter(){this.$emit("del-alert")},updateScore(e){e>0?(this.score++,this.$emit("score",this.commentData.id,this.score)):this.score>0&&(this.score--,this.$emit("score",this.commentData.id,this.score))},updateText(){const e=document.getElementById("text"+this.commentData.id).value;this.commentData.content=e,this.$emit("text",this.commentData.id,e),this.editToggle()}},computed:{image(){return this.commentData.user.image.png},textId(){return"text"+this.commentData.id}}}),VueApp.component("commentor",{emits:["new-thread"],props:{user:{type:Object,required:!0},action:{type:Boolean,required:!0},commentBy:{type:Object,required:!1}},template:'\n    <div class="commentor" id="commentor">\n        <img :src="avatar" :alt="avatarOf" class="avatar">\n        <textarea name="comment" id="text" cols="30" rows="3" placeholder="Add a comment..." :class="(!this.action)? \'rep\':\'\'">{{ filler }}</textarea>\n        <button v-show="this.action" @click="addThread()">send</button>\n        <button v-show="!this.action">reply</button>\n    </div>\n    ',data:function(){return{}},created:function(){},methods:{addThread(){const e=document.getElementById("text").value;this.$emit("new-thread",e)}},computed:{avatar(){return this.user.image.png},avatarOf(){return"avatar of "+this.user.username},updater(){return this.user.image.png},filler(){return this.action?"":"@"+this.commentBy+", "}}}),VueApp.component("interaction",{emits:["del","score","text"],props:{context:{type:Object,required:!0},user:{type:Object,required:!0}},template:'\n    <comment :commentData="context" :user="user" :reply="reply" @isReply="replyToggle" @del-alert="deletAlert" @score="scoreUpdater" @text="textUpdater"></comment>\n    <commentor v-if="user.image" :user="user" v-show="reply" :action="sendAction" :commentBy="context"></commentor> \n    ',data:function(){return{reply:!1,sendAction:!1}},methods:{replyToggle(e){this.reply=!!e},deletAlert(){this.$emit("del")},scoreUpdater(e,t){this.$emit("score",e,t)},textUpdater(e,t){this.$emit("text",e,t)}},computed:{}}),VueApp.component("thread",{emits:["score","text"],props:{commentin:{type:Object,required:!0},user:{type:Object,required:!0}},template:'\n    <div class="thread"> \n        <interaction :context="commentin" :user="user" @del="alert(commentin.id)" :key="commentin.id" @score="scoreUpdater" @text="textUpdater"></interaction>\n        <div class="replys" v-show="isReplied">\n            <interaction v-for="(reply,index) in commentin.replies" :user="user" :context="reply" @del="alert(index)" :key="reply.id" @score="scoreUpdater" @text="textUpdater"></interaction> \n        </div>\n    </div>\n    ',data:function(){return{}},methods:{alert(e){this.$emit("delete",e)},scoreUpdater(e,t){this.$emit("score",e,t)},textUpdater(e,t){this.$emit("text",e,t)}},computed:{isReplied(){return!(this.commentin.replies<=0)}}});
//# sourceMappingURL=all.js.map